# sargeras


## 简介

#### 什么是 sargeras ？
~~萨格拉斯（Sargeras），暴雪娱乐公司出品的系列游戏《魔兽争霸》及《魔兽世界》中的重要人物。黑暗泰坦萨格拉斯，男性莞讷泰坦，燃烧军团的缔造者兼初代首领。曾经伟大的万神殿最强大的战士，万神殿的保卫者，诸神之最髙诘者，复仇者阿格拉玛的导师。......~~  

其实是一个根据 Saga 思想实现的一个分布式事物框架，取名为 sargeras 是因为并没有完全的按照 Saga 的思想实现，所以在命名上也做了改变，即有关系又有差异，以示区分。

## 如何使用


## 详细介绍


## 其他

#### 没想清楚的地方
 * Listener 是否应该有多个？  
    如果只允许有一个Listener，那么 onError 方法应当返回状态，现在默认为处理中
 * 当某个 TX execute 返回 EXE_FAIL_TO_COMP 时，这个 TX 是否需要补偿？  
    现在是补偿的，选择补偿的原因是考虑到，虽然执行失败了，但可能还是有需要消除一些影响。
 * 轮询重试次数、间隔频率该如何控制？  
    如果下游业务宕机了，可能很多重试是无用的，可以定义轮询间隔，比如 {1,5,10,20.30,60} 依次作为轮询间隔
 * 如果因为发布，导致代码里的TX变化了，可能无法向下兼容，怎么办？  
    现在的考虑是向下兼容要业务系统考虑，如果某个流程在重试的时候，发现完全不能进行下去，比如找不到重试起始点的TX则尽量报错。
    
 
 
#### 怀味道
 * log 直接使用了 slf4j
 * 锁的实现依赖 Repository，感觉不是很合理。
 * 因某些代码比较繁琐，有的地方使用一点点 DDD 的思想，整体编码风格不是很一致
 * 现在必须先 Build Saga ，才能启动Application，感觉顺序有些奇怪

#### 版本记录

###### 0.1.1-SNAPSHOT
* 支持轮询重试
* 支持轮询重试间隔配置
* 支持轮询重试工作线程数配置

###### 0.1.0-SNAPSHOT
* 支持一个Saga正向执行、逆向回滚
* 完成基本的配置、存储、序列化、管理、异常等组件
* 定义基本的 API，支持配置文件指定组件的实现 












